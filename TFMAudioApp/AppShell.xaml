<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="TFMAudioApp.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:views="clr-namespace:TFMAudioApp.Views"
    xmlns:controls="clr-namespace:TFMAudioApp.Controls"
    Title="TFM Audio"
    FlyoutBehavior="Flyout"
    Shell.BackgroundColor="{StaticResource PageBackgroundColor}"
    Shell.FlyoutBackgroundColor="{StaticResource CardBackgroundColor}"
    Shell.TitleColor="White"
    Shell.ForegroundColor="White">

    <!-- Mini Player Footer -->
    <Shell.FlyoutFooter>
        <controls:MiniPlayerControl x:Name="MiniPlayer"/>
    </Shell.FlyoutFooter>

    <Shell.FlyoutHeader>
        <VerticalStackLayout Padding="20" Spacing="10" BackgroundColor="{StaticResource PageBackgroundColor}">
            <Label Text="ðŸŽµ" FontSize="48" HorizontalOptions="Center"/>
            <Label Text="TFM Audio"
                   FontSize="24"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="{StaticResource Primary}"/>
            <!-- Connection Status Indicator -->
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="5" Margin="0,5,0,0">
                <Label x:Name="ConnectionIndicator"
                       Text="â—"
                       FontSize="12"
                       TextColor="{StaticResource Primary}"
                       VerticalOptions="Center"/>
                <Label x:Name="ConnectionText"
                       Text="Connected"
                       FontSize="12"
                       TextColor="{StaticResource Gray400}"
                       VerticalOptions="Center"/>
            </HorizontalStackLayout>
            <BoxView HeightRequest="1" Color="{StaticResource Gray600}" Margin="0,10,0,0"/>
        </VerticalStackLayout>
    </Shell.FlyoutHeader>

    <!-- Setup Page (not in flyout) -->
    <ShellContent
        Route="setup"
        ContentTemplate="{DataTemplate views:SetupPage}"
        FlyoutItemIsVisible="False"/>

    <!-- Main Navigation -->
    <FlyoutItem Title="Home" Icon="{OnPlatform Default='home.png'}">
        <ShellContent
            Route="home"
            ContentTemplate="{DataTemplate views:HomePage}"/>
    </FlyoutItem>

    <FlyoutItem Title="Channels" Icon="{OnPlatform Default='channels.png'}">
        <ShellContent
            Route="channels"
            ContentTemplate="{DataTemplate views:ChannelsPage}"/>
    </FlyoutItem>

    <FlyoutItem Title="Playlists" Icon="{OnPlatform Default='playlists.png'}">
        <ShellContent
            Route="playlists"
            ContentTemplate="{DataTemplate views:PlaylistsPage}"/>
    </FlyoutItem>

    <FlyoutItem Title="Downloads" Icon="{OnPlatform Default='downloads.png'}">
        <ShellContent
            Route="downloads"
            ContentTemplate="{DataTemplate views:DownloadsPage}"/>
    </FlyoutItem>

    <FlyoutItem Title="Settings" Icon="{OnPlatform Default='settings.png'}">
        <ShellContent
            Route="settings"
            ContentTemplate="{DataTemplate views:SettingsPage}"/>
    </FlyoutItem>

</Shell>
